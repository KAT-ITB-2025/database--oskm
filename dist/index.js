import {pgEnum,pgTable,timestamp,text,date,integer,serial}from'drizzle-orm/pg-core';import {init}from'@paralleldrive/cuid2';import {relations}from'drizzle-orm';init({length:8});var r=()=>new Date;var f=pgEnum("account_role_enum",["admin","mamet","mentor","user","guest"]),a=pgTable("account",{id:text("id").primaryKey(),nim:text("nim").notNull().unique(),password:text("password").notNull(),role:f("role").default("user").notNull(),lastLoggedIn:timestamp("last_logged_in"),createdAt:timestamp("created_at").defaultNow(),updatedAt:timestamp("updated_at").$onUpdate(r)}),I=relations(a,({one:s})=>({user:s(o,{fields:[a.id],references:[o.id]})}));var o=pgTable("user",{id:text("id").primaryKey().references(()=>a.id),nim:text("nim").notNull().unique(),email:text("email").unique(),fullName:text("full_name"),birthDate:date("birth_date"),phoneNumber:text("phone_number"),idLine:text("id_line"),idDiscord:text("id_discord"),idInstagram:text("id_instagram"),fakultas:text("fakultas"),prodi:text("prodi"),kelompok:text("kelompok"),createdAt:timestamp("created_at").defaultNow(),updatedAt:timestamp("updated_at").$onUpdate(r)});var B=pgTable("endpoint_analytics",{id:serial("id").primaryKey(),userId:text("user_id").references(()=>o.id,{onDelete:"set null"}),endpoint:text("endpoint").notNull(),method:text("method").notNull(),statusCode:integer("status_code").notNull(),responseTimeMs:integer("response_time_ms"),urlQuery:text("url_query"),requestBody:text("request_body"),errorMessage:text("error_message"),createdAt:timestamp("created_at").defaultNow()});export{a as account,I as accountRelation,f as accountRoleEnum,B as endpointAnalytics,o as user};